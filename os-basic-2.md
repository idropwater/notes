# OS 基础-2

## 内存管理概念

- 为什么要进行内存管理？

- 页式管理中每个页表项的大小的上下限如何确定？

- 多级页表解决了什么问题？又会带来什么问题？

- 内存管理功能：1）内存空间分配和回收（由操作系统完成）；2）地址转换（逻辑地址->物理地址）；3）扩充内存空间（虚拟内存）；4）存储保护（各作业互不打扰）

- 进程运行原理：1）创建进程首先将程序和数据装入内存（源程序->在内存中可执行的程序：编译-链接-装入）；2）逻辑地址与物理地址；3）内存保护，防止越界（一种是设置一对上下限寄存器，存放用户作业在主存的上下物理地址；另外一种是采用基址寄存器-最小的物理地址值、限长寄存器-逻辑地址的最大值）

- 交换的基本思想：把处于等待状态的程序从内存移到辅存，叫做`换出`；把准备好竞争CPU运行的程序从辅存移到内存叫做`换入`

- 连续分配管理方式：为一个用户程序分配一个连续的内存空间

- 固定分区分配：将用户内存划分为若干个`固定大小`的区域，每个分区只装一道作业；有的程序小于固定分区大小时，也占据完整的内存分区空间，称为`内部碎片`

- 动态分区分配：根据进程大小创建内存分区，并使分区大小正好合适进程的需要；随着不同进程的换入换出，使得一些内存空间无法被所有进程利用，称为`外部碎片`

- 动态分区分配策略：1）`首次适应`（空闲分区以地址递增的次序链接，分配内存时顺序查找，找到大小满足要求的第一个空间分区，通常是最好也最快）；2）最佳适应；3）最坏适应；4）临近适应

- 非连续分配管理方式：如果内存有超过1G的空闲空间，但没有连续的1G空间，需要1G空间的作业也是无法完成；作业要求的1G内存空间可以分散的分配在内存的各个区域

- 分页式存储

	1. 概念：把`主存空间`划分为大小相等且固定的块（称为页框），作为主存的基本单位；每个`进程`也以块（称为页）划分，进程在执行时，以块为单位逐个申请主存的块空间

	2. 逻辑地址结构：前一部分为页号P，后一部分为页内偏移W

	3. 页表：系统为每个进程建立一张页表，记录页面在内存中对应的物理块号；

	4. 页表寄存器：存放页表在内存中的起始地址F和页表长度M

	5. 寻址过程：逻辑地址->页表寄存器->页表->物理地址

- 分段式存储

	1. -概念：eg用户进程由主程序、两个字程序、栈和一组数据组成，于是可以划分为5个段，每个段分配一个连续的地址空间
	
	2. 逻辑地址：前一部分是段号S，后一部分为段内偏移W

	3. 段表：系统为每个进程建立一张段表，每个段表项对应进程的一个段；

	4. 段表寄存器：存放段表在内存中的起始地址F和段表长度M

	5. 寻址过程：逻辑地址->段表寄存器->段表->物理地址

- 段页式存储

	1. 概念：作业地址空间先划分段，然后每个段再分成若干大小的页

	2. 逻辑地址：段号S、页号P、页内偏移

	3. 寻址过程：逻辑地址->段表寄存器->段表（存放页表始址）->页表->物理地址

## 虚拟内存概念

- 为什么要引入虚拟内存？

- 虚拟内存的大小由什么因素决定？

- 虚拟内存是怎么解决问题的，会带来什么问题？

- [局部性原理](https://baike.baidu.com/item/%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86)






